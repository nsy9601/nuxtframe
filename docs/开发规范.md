# 开发规范文档
## 一、代码规范
### 1. TypeScript 规范
- 所有组件、工具函数必须使用 TS 编写，明确类型定义
- 组件 Props 必须通过 `defineProps` 显式声明类型
- 事件必须通过 `defineEmits` 显式声明，避免隐式触发
- 避免使用 `any` 类型，优先使用泛型或联合类型

### 2. Vue 组件规范
- 组件文件命名：PascalCase（如 `DataTable.vue`）
- 组件属性顺序：class → :class → :is → v-model → 其他属性 → @事件
- 避免在模板中写复杂逻辑，复杂逻辑抽离为计算属性或工具函数
- 组件拆分原则：单一职责，UI组件与业务组件分离

### 3. 目录规范
- `app/components/layout/`：布局组件（Sidebar、Navbar 等）
- `app/components/business/`：业务核心组件（表格、表单等）
- `app/components/common/`：通用UI组件（弹窗、空状态等）
- `app/components/custom/`：自定义业务组件（按业务需求添加）
- `app/composables/`：组合式函数（useXXX.ts 命名）
- `app/utils/`：工具函数（无响应式逻辑）

### 4. 样式规范
- 优先使用 Tailwind CSS 工具类，减少自定义样式
- 自定义样式使用 LESS，变量统一放在 `variables.less`
- 组件样式使用 `scoped` 修饰，避免样式污染
- 响应式适配：使用 Tailwind 响应式前缀（sm:/md:/lg:）

## 二、接口调用规范
### 1. 接口封装
- 所有接口通过 `useApi.ts` 封装，统一错误处理
- 接口参数必须声明类型，与后端保持一致
- 虚拟数据与真实接口通过 `apiSwitch.ts` 切换，无需修改业务代码

### 2. 数据处理
- 接口返回数据必须经过格式化后再渲染（使用 `useFormatter.ts`）
- 列表数据必须分页，避免一次性加载大量数据
- 表单提交前必须通过 Zod 校验，避免无效请求

## 三、UI Tag 配置规范
### 1. 模型级配置（UIConfig 字段）
- `model`：全局唯一，前后端保持一致（如 `SysUser`）
- `actions`：按钮列表，内置按钮（view/edit/delete）+ 自定义按钮（custom:XXX）
- `action-permission`：按钮权限绑定，格式「按钮名=权限标识」
- `search-default-count`：搜索区默认显示字段数（默认3）

### 2. 字段级配置
- `label`：字段显示名称，表格/表单/搜索共用
- `sort`：显示权重，数值越小越靠前（默认99）
- `type`：前端组件类型，直接使用 Nuxt UI 组件名（如 `UInput`）
- `rules`：校验规则，多规则用分号分隔（如 `required;phone`）
- `formatter`：格式化类型（如 `datetime:YYYY-MM-DD HH:mm`）

## 四、新增业务模型规范
### 1. 前端开发流程
1. 在 `app/pages/` 目录下创建模型页面（如 `order.vue`）
2. 页面中引用通用模型组件（`ModelList`/`ModelCreate` 等）
3. 配置模型标识（`modelName: 'order'`）
4. 按需添加自定义逻辑（如特殊搜索、表单联动）

### 2. 配置检查清单
- 模型 `model` 标识全局唯一
- 所有必填字段配置 `required: true` 和校验规则
- 表格字段配置 `table: true`，表单字段配置 `form: true`
- 搜索字段配置 `search: true` 和 `op` 操作符
- 按钮配置对应的权限标识，与后端保持一致